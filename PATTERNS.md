# Patterns Introduction（设计模式介绍）

## Strategy Pattern（策略模式）
策略模式定义了算法族，分别封装起来，让他们之间可以互相替换，此模式让算法的变化独立于使用算法的客户。

### 应用场景
1. 多个类只区别在表现行为不同，可以使用Strategy模式，在运行时动态选择具体要执行的行为。
2. 需要在不同情况下使用不同的策略(算法)，或者策略还可能在未来用其它方式来实现。
3. 对客户隐藏具体策略(算法)的实现细节，彼此完全独立。

## Observer Pattern（观察者模式）
观察者模式定义了对象之间的一对多依赖，这样一来，当一个对象改变状态时，他的所有依赖者都会收到通知并自动更新。
观察者模式提供了一种对象设计，让主题和观察者之间松耦合

## Decorator Pattern（装饰者模式）
装饰者模式动态地将责任附加到对象上。若要扩展功能，装饰者提供了比继承更有弹性的替代方案。
装饰者模式主要有Component、ConcreteComponent、Decorator和ConcreteDecorator组成：
1. 抽象组件角色(Component)：定义一个对象接口，以规范准备接受附加责任的对象，即可以给这些对象动态地添加职责。
2. 具体组件角色(ConcreteComponent) :被装饰者，定义一个将要被装饰增加功能的类。可以给这个类的对象添加一些职责。
3. 抽象装饰者(Decorator):维持一个指向构件Component对象的实例，并定义一个与抽象组件角色Component接口一致的接口。
4. 具体装饰者角色（ConcreteDecorator):向组件添加职责。

python 装饰器可以更简单实现装饰者模式

## Factory Pattern（工厂模式）
### 工厂方法模式
工厂方法用来处理对象的创建，并将这样的行为封装在子类中。这样，客户程序中关于超类的代码就和子类对象创建代码解耦了。

工厂模式用来封装对象的创建。工厂方法模式通过让子类决定该创建的对象是什么，来达到将对象创建的过程封装的目的。

工厂方法模式定义了一个对象创建接口，但是由子类决定要实例化的类是哪一个，工厂方法让类把实例化推迟到子类。

工厂方法模式通常包括创建者（Creator，具体的创建者实现工厂方法）和 产品（Product）。
创建者类是抽象创建者类，它定义了一个抽象的工厂方法，让子类实现此方法制造产品。
创建者通常包含依赖于抽象产品的代码，而这些抽象产品由子类制造，创建者不需要真的知道在制造那种具体产品。

工厂方法让子类决定要实例化那个类，并不是指允许子类在运行时决定，而是指在编写创建者类的时候，不需要知道实际创建的产品是哪个。选择使用了哪个子类，自然就决定了实际创建的产品是什么。

### 抽象工厂模式
抽象工厂模式提供一个接口，用于创建相关或依赖对象的家族，而不需要明确指定具体类。

抽象工厂允许客户使用抽象的接口来创建一组相关的产品，而不需要知道实际产出的具体产品是什么，这样客户从具体的产品解耦。

抽象工厂定义了一个接口，所有的具体工厂都必须实现此接口，这个接口包含一组方法用来生产产品。

### 比较
- 工厂方法使用继承：把对象的创建委托给子类，子类实现工厂方法来创建对象。可以把客户代码从需要实例化的具体类中解耦，或者如果还不知道将来需要实例化哪些具体类时，也可以使用工厂方法。
工厂方法使用简单，只需要继承成子类，并实现工厂方法即可。
- 抽象工厂使用组合：提供一个用来创建产品家族的抽象类型，类型的子类定义了产品被产生的方法，要使用这个工厂必须先实例化它，
然后将它传入一些针对抽象类型所写的代码中。对象的创建被实现在工厂接口所暴露出来的方法中。当需要创建产品家族和想让制造的相关产品集合起来时，可以使用抽象工厂。

## 单例模式
单例模式确保一个类只有一个实例，并提供一个全局访问点。

## 命令模式
命令模式将「请求」封装成对象，以便使用不同的请求、队列或者日志来参数化其他对象。命令模式也支持可撤销的操作。

命令模式将一个请求封装为一个对象，从而使我们可用不同的请求对客户进行参数化；对请求排队或者记录请求日志，以及支持可撤销的操作。
命令模式是一种对象行为型模式，其别名为动作(Action)模式或事务(Transaction)模式。
- 一个命令对象通过在特定接收者上绑定一组动作来封装一个请求，命令对象将动作和接受者包进对象中，暴露出一个 `execute()` 方法
- 一个命令对象需要有相应的接受者，`execute()`方法调用接受者的一个或多个动作
- 调用者持有命令对象，在特定时间执行命令对象的`execute()`方法

### 命令模式的其他应用
- 队列请求：一端添加命令，另一端取出命令，执行命令的 `execute()` 方法，这样工作队列类和进行计算的对象之间完全解耦
- 日志请求：将执行动作记录在日志中，在系统死机重启后调用这些动作恢复到之前的状态。命令模式通过新增方法 `load()` 和 `store()` 可以支持。需要将对象序列化并持久化到日志中。